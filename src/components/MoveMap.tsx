import { useMemo } from "react";
import usMapImage from "@/assets/us_map_outlined.png";

interface MoveMapProps {
  fromZip: string;
  toZip: string;
}

// Approximate x,y positions for ZIP prefixes on a 960x600 US map
const ZIP_COORDS: Record<string, { x: number; y: number }> = {
  // Northeast
  "010": { x: 890, y: 145 }, "011": { x: 892, y: 143 }, "012": { x: 885, y: 140 },
  "013": { x: 883, y: 148 }, "014": { x: 895, y: 150 }, "015": { x: 897, y: 148 },
  "016": { x: 899, y: 146 }, "017": { x: 901, y: 149 }, "018": { x: 903, y: 147 },
  "019": { x: 905, y: 145 }, "020": { x: 910, y: 155 }, "021": { x: 912, y: 153 },
  "022": { x: 914, y: 150 }, "023": { x: 908, y: 152 }, "024": { x: 906, y: 149 },
  "025": { x: 904, y: 147 }, "026": { x: 902, y: 145 }, "027": { x: 900, y: 143 },
  "028": { x: 920, y: 165 }, "029": { x: 918, y: 167 },
  "030": { x: 905, y: 130 }, "031": { x: 903, y: 128 }, "032": { x: 901, y: 126 },
  "033": { x: 907, y: 132 }, "034": { x: 909, y: 134 }, "035": { x: 895, y: 120 },
  "036": { x: 897, y: 122 }, "037": { x: 899, y: 124 }, "038": { x: 905, y: 128 },
  "039": { x: 885, y: 110 }, "040": { x: 915, y: 115 }, "041": { x: 917, y: 117 },
  "042": { x: 919, y: 119 }, "043": { x: 913, y: 113 }, "044": { x: 911, y: 111 },
  "045": { x: 909, y: 109 }, "046": { x: 907, y: 107 }, "047": { x: 905, y: 105 },
  "048": { x: 903, y: 103 }, "049": { x: 901, y: 101 },
  "050": { x: 890, y: 120 }, "051": { x: 888, y: 118 }, "052": { x: 886, y: 116 },
  "053": { x: 884, y: 114 }, "054": { x: 887, y: 112 }, "055": { x: 889, y: 110 },
  "056": { x: 891, y: 108 }, "057": { x: 893, y: 106 }, "058": { x: 870, y: 95 },
  "059": { x: 200, y: 90 },
  "060": { x: 880, y: 175 }, "061": { x: 878, y: 173 }, "062": { x: 876, y: 171 },
  "063": { x: 874, y: 169 }, "064": { x: 882, y: 177 }, "065": { x: 884, y: 179 },
  "066": { x: 886, y: 181 }, "067": { x: 888, y: 183 }, "068": { x: 890, y: 185 },
  "069": { x: 892, y: 187 },
  "070": { x: 870, y: 185 }, "071": { x: 868, y: 183 }, "072": { x: 866, y: 181 },
  "073": { x: 864, y: 179 }, "074": { x: 872, y: 187 }, "075": { x: 874, y: 189 },
  "076": { x: 876, y: 191 }, "077": { x: 878, y: 193 }, "078": { x: 880, y: 195 },
  "079": { x: 882, y: 197 }, "080": { x: 884, y: 199 }, "081": { x: 886, y: 201 },
  "082": { x: 888, y: 203 }, "083": { x: 890, y: 205 }, "084": { x: 892, y: 207 },
  "085": { x: 874, y: 193 }, "086": { x: 876, y: 195 }, "087": { x: 878, y: 197 },
  "088": { x: 880, y: 199 }, "089": { x: 882, y: 201 },
  // New York
  "100": { x: 865, y: 180 }, "101": { x: 867, y: 178 }, "102": { x: 869, y: 176 },
  "103": { x: 863, y: 182 }, "104": { x: 861, y: 184 }, "105": { x: 859, y: 175 },
  "106": { x: 857, y: 173 }, "107": { x: 855, y: 171 }, "108": { x: 853, y: 169 },
  "109": { x: 851, y: 167 }, "110": { x: 875, y: 182 }, "111": { x: 877, y: 180 },
  "112": { x: 873, y: 184 }, "113": { x: 871, y: 186 }, "114": { x: 869, y: 188 },
  "115": { x: 878, y: 176 }, "116": { x: 880, y: 174 }, "117": { x: 882, y: 172 },
  "118": { x: 884, y: 170 }, "119": { x: 886, y: 168 },
  "120": { x: 855, y: 165 }, "121": { x: 853, y: 163 }, "122": { x: 851, y: 161 },
  "123": { x: 849, y: 159 }, "124": { x: 847, y: 157 }, "125": { x: 845, y: 155 },
  "126": { x: 843, y: 153 }, "127": { x: 841, y: 151 }, "128": { x: 839, y: 149 },
  "129": { x: 837, y: 147 }, "130": { x: 835, y: 155 }, "131": { x: 833, y: 153 },
  "132": { x: 831, y: 151 }, "133": { x: 829, y: 149 }, "134": { x: 827, y: 147 },
  "135": { x: 825, y: 145 }, "136": { x: 823, y: 143 }, "137": { x: 821, y: 141 },
  "138": { x: 819, y: 139 }, "139": { x: 817, y: 137 },
  "140": { x: 790, y: 155 }, "141": { x: 788, y: 153 }, "142": { x: 786, y: 151 },
  "143": { x: 784, y: 149 }, "144": { x: 782, y: 147 }, "145": { x: 780, y: 145 },
  "146": { x: 778, y: 143 }, "147": { x: 776, y: 141 }, "148": { x: 774, y: 139 },
  "149": { x: 772, y: 137 },
  // Pennsylvania  
  "150": { x: 800, y: 190 }, "151": { x: 798, y: 188 }, "152": { x: 796, y: 186 },
  "153": { x: 794, y: 184 }, "154": { x: 792, y: 182 }, "155": { x: 790, y: 180 },
  "156": { x: 788, y: 178 }, "157": { x: 786, y: 176 }, "158": { x: 784, y: 174 },
  "159": { x: 782, y: 172 }, "160": { x: 795, y: 185 }, "161": { x: 793, y: 183 },
  "162": { x: 791, y: 181 }, "163": { x: 789, y: 179 }, "164": { x: 787, y: 177 },
  "165": { x: 785, y: 175 }, "166": { x: 810, y: 190 }, "167": { x: 812, y: 192 },
  "168": { x: 814, y: 194 }, "169": { x: 816, y: 196 }, "170": { x: 820, y: 195 },
  "171": { x: 822, y: 197 }, "172": { x: 824, y: 199 }, "173": { x: 826, y: 201 },
  "174": { x: 828, y: 203 }, "175": { x: 830, y: 205 }, "176": { x: 835, y: 200 },
  "177": { x: 827, y: 198 }, "178": { x: 829, y: 200 }, "179": { x: 831, y: 202 },
  "180": { x: 850, y: 190 }, "181": { x: 852, y: 188 }, "182": { x: 840, y: 185 },
  "183": { x: 842, y: 183 }, "184": { x: 844, y: 181 }, "185": { x: 846, y: 179 },
  "186": { x: 848, y: 177 }, "187": { x: 850, y: 175 }, "188": { x: 852, y: 173 },
  "189": { x: 854, y: 171 }, "190": { x: 855, y: 200 }, "191": { x: 857, y: 198 },
  "192": { x: 859, y: 196 }, "193": { x: 861, y: 194 }, "194": { x: 853, y: 202 },
  "195": { x: 851, y: 204 }, "196": { x: 849, y: 206 },
  // Washington DC / Maryland / Virginia
  "200": { x: 840, y: 220 }, "201": { x: 842, y: 222 }, "202": { x: 838, y: 218 },
  "203": { x: 836, y: 216 }, "204": { x: 834, y: 218 }, "205": { x: 845, y: 220 },
  "206": { x: 843, y: 222 }, "207": { x: 841, y: 224 }, "208": { x: 847, y: 215 },
  "209": { x: 849, y: 213 }, "210": { x: 851, y: 215 }, "211": { x: 853, y: 213 },
  "212": { x: 850, y: 210 }, "213": { x: 848, y: 212 }, "214": { x: 846, y: 214 },
  "215": { x: 844, y: 216 }, "216": { x: 850, y: 208 }, "217": { x: 843, y: 218 },
  "218": { x: 855, y: 210 }, "219": { x: 853, y: 212 },
  "220": { x: 830, y: 230 }, "221": { x: 828, y: 228 }, "222": { x: 835, y: 232 },
  "223": { x: 837, y: 234 }, "224": { x: 820, y: 235 }, "225": { x: 818, y: 233 },
  "226": { x: 825, y: 230 }, "227": { x: 827, y: 232 }, "228": { x: 810, y: 240 },
  "229": { x: 808, y: 238 }, "230": { x: 840, y: 240 }, "231": { x: 842, y: 242 },
  "232": { x: 838, y: 238 }, "233": { x: 850, y: 240 }, "234": { x: 852, y: 238 },
  "235": { x: 848, y: 242 }, "236": { x: 855, y: 245 }, "237": { x: 815, y: 230 },
  "238": { x: 813, y: 228 }, "239": { x: 820, y: 232 }, "240": { x: 800, y: 240 },
  "241": { x: 798, y: 238 }, "242": { x: 805, y: 242 }, "243": { x: 795, y: 235 },
  "244": { x: 793, y: 233 }, "245": { x: 800, y: 237 }, "246": { x: 790, y: 240 },
  // North/South Carolina
  "270": { x: 810, y: 275 }, "271": { x: 795, y: 270 }, "272": { x: 790, y: 268 },
  "273": { x: 805, y: 273 }, "274": { x: 788, y: 272 }, "275": { x: 815, y: 278 },
  "276": { x: 785, y: 265 }, "277": { x: 820, y: 280 }, "278": { x: 795, y: 268 },
  "279": { x: 825, y: 282 }, "280": { x: 805, y: 275 }, "281": { x: 807, y: 273 },
  "282": { x: 809, y: 271 }, "283": { x: 811, y: 269 }, "284": { x: 813, y: 267 },
  "285": { x: 815, y: 265 }, "286": { x: 820, y: 275 }, "287": { x: 822, y: 273 },
  "288": { x: 824, y: 271 }, "289": { x: 830, y: 275 },
  "290": { x: 815, y: 295 }, "291": { x: 813, y: 293 }, "292": { x: 820, y: 297 },
  "293": { x: 810, y: 290 }, "294": { x: 808, y: 292 }, "295": { x: 825, y: 300 },
  "296": { x: 805, y: 288 }, "297": { x: 827, y: 298 }, "298": { x: 835, y: 305 },
  "299": { x: 840, y: 310 },
  // Georgia
  "300": { x: 775, y: 310 }, "301": { x: 773, y: 308 }, "302": { x: 780, y: 312 },
  "303": { x: 775, y: 305 }, "304": { x: 773, y: 303 }, "305": { x: 780, y: 307 },
  "306": { x: 770, y: 315 }, "307": { x: 768, y: 313 }, "308": { x: 790, y: 325 },
  "309": { x: 788, y: 323 }, "310": { x: 795, y: 330 }, "311": { x: 785, y: 320 },
  "312": { x: 783, y: 318 }, "313": { x: 800, y: 335 }, "314": { x: 805, y: 330 },
  "315": { x: 765, y: 310 }, "316": { x: 763, y: 308 }, "317": { x: 760, y: 305 },
  "318": { x: 758, y: 303 }, "319": { x: 810, y: 340 },
  // Florida
  "320": { x: 800, y: 350 }, "321": { x: 825, y: 385 }, "322": { x: 798, y: 348 },
  "323": { x: 830, y: 405 }, "324": { x: 795, y: 352 }, "325": { x: 790, y: 355 },
  "326": { x: 815, y: 375 }, "327": { x: 820, y: 380 }, "328": { x: 825, y: 385 },
  "329": { x: 830, y: 395 }, "330": { x: 835, y: 430 }, "331": { x: 840, y: 440 },
  "332": { x: 830, y: 425 }, "333": { x: 845, y: 435 }, "334": { x: 805, y: 365 },
  "335": { x: 800, y: 362 }, "336": { x: 795, y: 368 }, "337": { x: 790, y: 358 },
  "338": { x: 828, y: 420 }, "339": { x: 823, y: 415 }, "340": { x: 850, y: 445 },
  "341": { x: 785, y: 356 }, "342": { x: 780, y: 354 }, "344": { x: 818, y: 410 },
  "346": { x: 810, y: 405 }, "347": { x: 832, y: 418 },
  // Alabama
  "350": { x: 720, y: 320 }, "351": { x: 718, y: 318 }, "352": { x: 725, y: 322 },
  "354": { x: 715, y: 310 }, "355": { x: 713, y: 308 }, "356": { x: 720, y: 312 },
  "357": { x: 710, y: 315 }, "358": { x: 708, y: 313 }, "359": { x: 730, y: 330 },
  "360": { x: 735, y: 325 }, "361": { x: 733, y: 323 }, "362": { x: 740, y: 327 },
  "363": { x: 745, y: 335 }, "364": { x: 743, y: 333 }, "365": { x: 750, y: 340 },
  "366": { x: 755, y: 345 }, "367": { x: 728, y: 328 }, "368": { x: 726, y: 326 },
  "369": { x: 724, y: 324 },
  // Tennessee
  "370": { x: 720, y: 270 }, "371": { x: 718, y: 268 }, "372": { x: 725, y: 272 },
  "373": { x: 715, y: 265 }, "374": { x: 713, y: 263 }, "375": { x: 705, y: 270 },
  "376": { x: 703, y: 268 }, "377": { x: 710, y: 272 }, "378": { x: 700, y: 265 },
  "379": { x: 730, y: 275 }, "380": { x: 660, y: 275 }, "381": { x: 658, y: 273 },
  "382": { x: 665, y: 277 }, "383": { x: 655, y: 270 }, "384": { x: 670, y: 278 },
  "385": { x: 675, y: 275 },
  // Kentucky
  "400": { x: 730, y: 235 }, "401": { x: 728, y: 233 }, "402": { x: 735, y: 237 },
  "403": { x: 725, y: 230 }, "404": { x: 723, y: 228 }, "405": { x: 720, y: 232 },
  "406": { x: 745, y: 240 }, "407": { x: 750, y: 237 }, "408": { x: 755, y: 242 },
  "409": { x: 760, y: 240 }, "410": { x: 740, y: 233 }, "411": { x: 755, y: 235 },
  "412": { x: 750, y: 233 }, "413": { x: 745, y: 235 }, "414": { x: 758, y: 233 },
  "415": { x: 762, y: 235 }, "416": { x: 765, y: 238 }, "417": { x: 767, y: 240 },
  "418": { x: 763, y: 242 },
  // Ohio
  "430": { x: 755, y: 200 }, "431": { x: 753, y: 198 }, "432": { x: 760, y: 202 },
  "433": { x: 750, y: 195 }, "434": { x: 752, y: 203 }, "435": { x: 758, y: 205 },
  "436": { x: 745, y: 193 }, "437": { x: 743, y: 195 }, "438": { x: 760, y: 200 },
  "439": { x: 762, y: 198 }, "440": { x: 770, y: 185 }, "441": { x: 772, y: 187 },
  "442": { x: 768, y: 183 }, "443": { x: 775, y: 190 }, "444": { x: 773, y: 188 },
  "445": { x: 777, y: 195 }, "446": { x: 779, y: 193 }, "447": { x: 770, y: 198 },
  "448": { x: 768, y: 200 }, "449": { x: 766, y: 202 }, "450": { x: 750, y: 210 },
  "451": { x: 748, y: 208 }, "452": { x: 755, y: 212 }, "453": { x: 745, y: 205 },
  "454": { x: 743, y: 203 }, "455": { x: 750, y: 207 }, "456": { x: 758, y: 213 },
  "457": { x: 760, y: 211 }, "458": { x: 756, y: 215 },
  // Indiana
  "460": { x: 715, y: 210 }, "461": { x: 713, y: 208 }, "462": { x: 720, y: 212 },
  "463": { x: 710, y: 205 }, "464": { x: 708, y: 207 }, "465": { x: 715, y: 210 },
  "466": { x: 705, y: 200 }, "467": { x: 703, y: 202 }, "468": { x: 725, y: 215 },
  "469": { x: 723, y: 213 }, "470": { x: 715, y: 220 }, "471": { x: 713, y: 218 },
  "472": { x: 720, y: 222 }, "473": { x: 725, y: 218 }, "474": { x: 723, y: 216 },
  "475": { x: 728, y: 220 }, "476": { x: 700, y: 205 }, "477": { x: 698, y: 207 },
  "478": { x: 710, y: 210 }, "479": { x: 708, y: 212 },
  // Michigan
  "480": { x: 735, y: 165 }, "481": { x: 738, y: 168 }, "482": { x: 732, y: 162 },
  "483": { x: 745, y: 175 }, "484": { x: 748, y: 178 }, "485": { x: 725, y: 158 },
  "486": { x: 722, y: 160 }, "487": { x: 740, y: 180 }, "488": { x: 720, y: 150 },
  "489": { x: 717, y: 152 }, "490": { x: 710, y: 170 }, "491": { x: 707, y: 172 },
  "492": { x: 715, y: 175 }, "493": { x: 695, y: 140 }, "494": { x: 692, y: 138 },
  "495": { x: 705, y: 148 }, "496": { x: 702, y: 155 }, "497": { x: 685, y: 125 },
  "498": { x: 682, y: 123 }, "499": { x: 695, y: 120 },
  // Iowa
  "500": { x: 565, y: 190 }, "501": { x: 562, y: 188 }, "502": { x: 570, y: 192 },
  "503": { x: 555, y: 185 }, "504": { x: 580, y: 185 }, "505": { x: 577, y: 188 },
  "506": { x: 585, y: 190 }, "507": { x: 550, y: 192 }, "508": { x: 590, y: 188 },
  "509": { x: 595, y: 190 }, "510": { x: 540, y: 190 }, "511": { x: 545, y: 188 },
  "512": { x: 535, y: 192 }, "513": { x: 600, y: 185 }, "514": { x: 597, y: 183 },
  "515": { x: 565, y: 188 }, "516": { x: 538, y: 188 }, "520": { x: 590, y: 195 },
  "521": { x: 587, y: 193 }, "522": { x: 595, y: 197 }, "523": { x: 582, y: 195 },
  "524": { x: 600, y: 198 }, "525": { x: 575, y: 198 }, "526": { x: 605, y: 195 },
  "527": { x: 602, y: 193 }, "528": { x: 608, y: 197 },
  // Wisconsin
  "530": { x: 640, y: 150 }, "531": { x: 645, y: 153 }, "532": { x: 655, y: 158 },
  "534": { x: 635, y: 147 }, "535": { x: 630, y: 149 }, "536": { x: 625, y: 142 },
  "537": { x: 645, y: 160 }, "538": { x: 640, y: 162 }, "539": { x: 650, y: 155 },
  "540": { x: 620, y: 138 }, "541": { x: 615, y: 135 }, "542": { x: 610, y: 140 },
  "543": { x: 605, y: 138 }, "544": { x: 600, y: 132 }, "545": { x: 595, y: 135 },
  "546": { x: 625, y: 145 }, "547": { x: 630, y: 148 }, "548": { x: 590, y: 125 },
  "549": { x: 585, y: 122 },
  // Minnesota
  "550": { x: 575, y: 130 }, "551": { x: 572, y: 128 }, "553": { x: 580, y: 132 },
  "554": { x: 565, y: 125 }, "555": { x: 562, y: 123 }, "556": { x: 570, y: 127 },
  "557": { x: 558, y: 135 }, "558": { x: 545, y: 115 }, "559": { x: 540, y: 112 },
  "560": { x: 525, y: 128 }, "561": { x: 522, y: 125 }, "562": { x: 530, y: 130 },
  "563": { x: 515, y: 122 }, "564": { x: 535, y: 122 }, "565": { x: 520, y: 108 },
  "566": { x: 500, y: 100 }, "567": { x: 490, y: 95 },
  // South Dakota
  "570": { x: 455, y: 135 }, "571": { x: 452, y: 133 }, "572": { x: 460, y: 137 },
  "573": { x: 480, y: 140 }, "574": { x: 477, y: 138 }, "575": { x: 485, y: 142 },
  "576": { x: 435, y: 130 }, "577": { x: 425, y: 135 },
  // North Dakota
  "580": { x: 455, y: 95 }, "581": { x: 452, y: 93 }, "582": { x: 460, y: 97 },
  "583": { x: 430, y: 90 }, "584": { x: 427, y: 88 }, "585": { x: 405, y: 95 },
  "586": { x: 420, y: 100 }, "587": { x: 470, y: 98 }, "588": { x: 480, y: 100 },
  // Montana
  "590": { x: 280, y: 95 }, "591": { x: 300, y: 100 }, "592": { x: 260, y: 90 },
  "593": { x: 320, y: 105 }, "594": { x: 340, y: 100 }, "595": { x: 350, y: 98 },
  "596": { x: 360, y: 102 }, "597": { x: 370, y: 105 }, "598": { x: 380, y: 108 },
  "599": { x: 250, y: 85 },
  // Illinois
  "600": { x: 660, y: 200 }, "601": { x: 657, y: 198 }, "602": { x: 665, y: 202 },
  "603": { x: 650, y: 195 }, "604": { x: 670, y: 198 }, "605": { x: 667, y: 196 },
  "606": { x: 670, y: 185 }, "607": { x: 675, y: 188 }, "608": { x: 665, y: 183 },
  "609": { x: 645, y: 205 }, "610": { x: 640, y: 202 }, "611": { x: 650, y: 208 },
  "612": { x: 635, y: 210 }, "613": { x: 630, y: 208 }, "614": { x: 640, y: 212 },
  "615": { x: 650, y: 220 }, "616": { x: 645, y: 218 }, "617": { x: 655, y: 222 },
  "618": { x: 645, y: 230 }, "619": { x: 640, y: 232 }, "620": { x: 660, y: 235 },
  "622": { x: 650, y: 238 }, "623": { x: 635, y: 235 }, "624": { x: 630, y: 233 },
  "625": { x: 645, y: 225 }, "626": { x: 640, y: 223 }, "627": { x: 650, y: 227 },
  "628": { x: 638, y: 230 }, "629": { x: 655, y: 232 },
  // Missouri
  "630": { x: 615, y: 235 }, "631": { x: 620, y: 233 }, "633": { x: 610, y: 237 },
  "634": { x: 600, y: 230 }, "635": { x: 597, y: 232 }, "636": { x: 625, y: 238 },
  "637": { x: 585, y: 235 }, "638": { x: 630, y: 240 }, "639": { x: 635, y: 242 },
  "640": { x: 555, y: 220 }, "641": { x: 552, y: 218 }, "644": { x: 560, y: 222 },
  "645": { x: 545, y: 225 }, "646": { x: 542, y: 223 }, "647": { x: 550, y: 227 },
  "648": { x: 590, y: 245 }, "649": { x: 587, y: 243 }, "650": { x: 605, y: 250 },
  "651": { x: 602, y: 248 }, "652": { x: 610, y: 252 }, "653": { x: 598, y: 255 },
  "654": { x: 595, y: 253 }, "655": { x: 590, y: 258 }, "656": { x: 587, y: 256 },
  "657": { x: 593, y: 260 }, "658": { x: 582, y: 253 },
  // Kansas
  "660": { x: 505, y: 225 }, "661": { x: 502, y: 223 }, "662": { x: 510, y: 227 },
  "664": { x: 490, y: 228 }, "665": { x: 498, y: 230 }, "666": { x: 495, y: 228 },
  "667": { x: 480, y: 225 }, "668": { x: 470, y: 228 }, "669": { x: 460, y: 230 },
  "670": { x: 450, y: 225 }, "671": { x: 447, y: 223 }, "672": { x: 455, y: 227 },
  "673": { x: 435, y: 230 }, "674": { x: 445, y: 228 }, "675": { x: 425, y: 225 },
  "676": { x: 415, y: 228 }, "677": { x: 405, y: 225 }, "678": { x: 395, y: 228 },
  "679": { x: 385, y: 225 },
  // Nebraska
  "680": { x: 500, y: 190 }, "681": { x: 497, y: 188 }, "683": { x: 510, y: 188 },
  "684": { x: 490, y: 185 }, "685": { x: 480, y: 188 }, "686": { x: 470, y: 185 },
  "687": { x: 460, y: 188 }, "688": { x: 450, y: 185 }, "689": { x: 440, y: 188 },
  "690": { x: 430, y: 185 }, "691": { x: 420, y: 188 }, "692": { x: 410, y: 185 },
  "693": { x: 400, y: 188 },
  // Louisiana
  "700": { x: 615, y: 390 }, "701": { x: 620, y: 392 }, "703": { x: 610, y: 388 },
  "704": { x: 605, y: 385 }, "705": { x: 595, y: 388 }, "706": { x: 625, y: 388 },
  "707": { x: 585, y: 385 }, "708": { x: 580, y: 383 }, "710": { x: 575, y: 388 },
  "711": { x: 600, y: 390 }, "712": { x: 608, y: 392 }, "713": { x: 565, y: 375 },
  "714": { x: 560, y: 377 },
  // Arkansas
  "716": { x: 595, y: 295 }, "717": { x: 592, y: 293 }, "718": { x: 600, y: 297 },
  "719": { x: 588, y: 290 }, "720": { x: 610, y: 290 }, "721": { x: 607, y: 288 },
  "722": { x: 615, y: 292 }, "723": { x: 603, y: 295 }, "724": { x: 600, y: 297 },
  "725": { x: 606, y: 293 }, "726": { x: 620, y: 295 }, "727": { x: 625, y: 293 },
  "728": { x: 630, y: 290 }, "729": { x: 635, y: 295 },
  // Oklahoma
  "730": { x: 490, y: 285 }, "731": { x: 487, y: 283 }, "734": { x: 495, y: 287 },
  "735": { x: 482, y: 280 }, "736": { x: 479, y: 282 }, "737": { x: 500, y: 283 },
  "738": { x: 475, y: 285 }, "739": { x: 465, y: 283 }, "740": { x: 510, y: 290 },
  "741": { x: 507, y: 288 }, "743": { x: 520, y: 280 }, "744": { x: 517, y: 282 },
  "745": { x: 530, y: 285 }, "746": { x: 540, y: 283 }, "747": { x: 535, y: 287 },
  "748": { x: 455, y: 285 }, "749": { x: 445, y: 283 },
  // Texas
  "750": { x: 495, y: 340 }, "751": { x: 492, y: 338 }, "752": { x: 500, y: 342 },
  "753": { x: 487, y: 335 }, "754": { x: 484, y: 337 }, "755": { x: 478, y: 332 },
  "756": { x: 475, y: 334 }, "757": { x: 468, y: 328 }, "758": { x: 465, y: 330 },
  "759": { x: 458, y: 335 }, "760": { x: 508, y: 325 }, "761": { x: 505, y: 323 },
  "762": { x: 512, y: 327 }, "763": { x: 520, y: 318 }, "764": { x: 528, y: 323 },
  "765": { x: 540, y: 328 }, "766": { x: 537, y: 330 }, "767": { x: 548, y: 325 },
  "768": { x: 555, y: 318 }, "769": { x: 448, y: 325 },
  "770": { x: 545, y: 380 }, "771": { x: 542, y: 378 }, "772": { x: 550, y: 382 },
  "773": { x: 558, y: 385 }, "774": { x: 555, y: 383 }, "775": { x: 563, y: 387 },
  "776": { x: 535, y: 375 }, "777": { x: 532, y: 377 }, "778": { x: 525, y: 395 },
  "779": { x: 522, y: 393 },
  "780": { x: 535, y: 365 }, "781": { x: 532, y: 363 }, "782": { x: 495, y: 395 },
  "783": { x: 500, y: 398 }, "784": { x: 478, y: 388 }, "785": { x: 485, y: 392 },
  "786": { x: 470, y: 360 }, "787": { x: 465, y: 362 }, "788": { x: 458, y: 368 },
  "789": { x: 455, y: 370 }, "790": { x: 405, y: 305 }, "791": { x: 402, y: 303 },
  "792": { x: 410, y: 308 }, "793": { x: 398, y: 312 }, "794": { x: 395, y: 310 },
  "795": { x: 388, y: 300 }, "796": { x: 385, y: 302 }, "797": { x: 378, y: 308 },
  "798": { x: 355, y: 335 }, "799": { x: 365, y: 328 },
  // Colorado
  "800": { x: 375, y: 220 }, "801": { x: 372, y: 218 }, "802": { x: 380, y: 222 },
  "803": { x: 368, y: 215 }, "804": { x: 385, y: 223 }, "805": { x: 382, y: 225 },
  "806": { x: 360, y: 220 }, "807": { x: 392, y: 225 }, "808": { x: 388, y: 223 },
  "809": { x: 395, y: 227 }, "810": { x: 375, y: 200 }, "811": { x: 372, y: 202 },
  "812": { x: 385, y: 205 }, "813": { x: 350, y: 200 }, "814": { x: 360, y: 205 },
  "815": { x: 345, y: 203 }, "816": { x: 340, y: 205 },
  // Wyoming
  "820": { x: 335, y: 155 }, "821": { x: 332, y: 153 }, "822": { x: 340, y: 157 },
  "823": { x: 325, y: 150 }, "824": { x: 348, y: 158 }, "825": { x: 355, y: 155 },
  "826": { x: 360, y: 158 }, "827": { x: 370, y: 160 }, "828": { x: 378, y: 155 },
  "829": { x: 363, y: 150 }, "830": { x: 368, y: 152 }, "831": { x: 358, y: 148 },
  // Idaho
  "832": { x: 230, y: 155 }, "833": { x: 227, y: 153 }, "834": { x: 235, y: 157 },
  "835": { x: 195, y: 140 }, "836": { x: 205, y: 148 }, "837": { x: 218, y: 155 },
  "838": { x: 185, y: 132 },
  // Utah
  "840": { x: 275, y: 210 }, "841": { x: 272, y: 208 }, "842": { x: 280, y: 212 },
  "843": { x: 268, y: 218 }, "844": { x: 288, y: 223 }, "845": { x: 258, y: 225 },
  "846": { x: 298, y: 230 }, "847": { x: 248, y: 218 },
  // Arizona
  "850": { x: 270, y: 305 }, "851": { x: 267, y: 303 }, "852": { x: 275, y: 308 },
  "853": { x: 260, y: 300 }, "855": { x: 280, y: 312 }, "856": { x: 285, y: 300 },
  "857": { x: 250, y: 295 }, "859": { x: 240, y: 288 }, "860": { x: 232, y: 295 },
  "863": { x: 222, y: 302 }, "864": { x: 212, y: 295 }, "865": { x: 295, y: 318 },
  // New Mexico
  "870": { x: 355, y: 300 }, "871": { x: 352, y: 298 }, "872": { x: 360, y: 302 },
  "873": { x: 345, y: 295 }, "874": { x: 368, y: 293 }, "875": { x: 378, y: 298 },
  "877": { x: 373, y: 300 }, "878": { x: 385, y: 305 }, "879": { x: 338, y: 290 },
  "880": { x: 390, y: 318 }, "881": { x: 387, y: 316 }, "882": { x: 395, y: 320 },
  "883": { x: 378, y: 312 }, "884": { x: 368, y: 318 },
  // Nevada
  "889": { x: 195, y: 248 }, "890": { x: 192, y: 245 }, "891": { x: 200, y: 252 },
  "893": { x: 185, y: 220 }, "894": { x: 182, y: 218 }, "895": { x: 190, y: 225 },
  "897": { x: 175, y: 195 }, "898": { x: 172, y: 192 },
  // California
  "900": { x: 130, y: 290 }, "901": { x: 127, y: 288 }, "902": { x: 135, y: 292 },
  "903": { x: 122, y: 285 }, "904": { x: 125, y: 287 }, "905": { x: 140, y: 295 },
  "906": { x: 145, y: 298 }, "907": { x: 133, y: 293 }, "908": { x: 120, y: 290 },
  "910": { x: 155, y: 285 }, "911": { x: 152, y: 283 }, "912": { x: 160, y: 288 },
  "913": { x: 165, y: 290 }, "914": { x: 145, y: 278 }, "915": { x: 142, y: 280 },
  "916": { x: 170, y: 285 }, "917": { x: 175, y: 288 }, "918": { x: 160, y: 270 },
  "919": { x: 150, y: 275 },
  "920": { x: 115, y: 305 }, "921": { x: 120, y: 308 }, "922": { x: 185, y: 305 },
  "923": { x: 182, y: 302 }, "924": { x: 190, y: 308 }, "925": { x: 200, y: 298 },
  "926": { x: 118, y: 298 }, "927": { x: 122, y: 300 }, "928": { x: 112, y: 295 },
  "930": { x: 110, y: 265 }, "931": { x: 115, y: 268 }, "932": { x: 128, y: 255 },
  "933": { x: 145, y: 245 }, "934": { x: 100, y: 255 }, "935": { x: 195, y: 268 },
  "936": { x: 185, y: 260 }, "937": { x: 175, y: 255 },
  "939": { x: 88, y: 215 }, "940": { x: 92, y: 218 }, "941": { x: 82, y: 210 },
  "942": { x: 100, y: 222 }, "943": { x: 108, y: 228 }, "944": { x: 85, y: 208 },
  "945": { x: 88, y: 210 }, "946": { x: 92, y: 213 }, "947": { x: 96, y: 216 },
  "948": { x: 100, y: 215 }, "949": { x: 105, y: 218 },
  "950": { x: 80, y: 225 }, "951": { x: 165, y: 295 }, "952": { x: 170, y: 298 },
  "953": { x: 75, y: 222 }, "954": { x: 85, y: 228 }, "955": { x: 102, y: 185 },
  "956": { x: 95, y: 190 }, "957": { x: 98, y: 193 }, "958": { x: 108, y: 198 },
  "959": { x: 115, y: 202 }, "960": { x: 90, y: 200 },
  "961": { x: 98, y: 205 },
  // Oregon/Washington
  "970": { x: 130, y: 140 }, "971": { x: 127, y: 138 }, "972": { x: 135, y: 142 },
  "973": { x: 118, y: 135 }, "974": { x: 115, y: 138 }, "975": { x: 155, y: 140 },
  "976": { x: 168, y: 138 }, "977": { x: 180, y: 140 }, "978": { x: 130, y: 132 },
  "979": { x: 105, y: 128 },
  "980": { x: 125, y: 80 }, "981": { x: 120, y: 78 }, "982": { x: 130, y: 82 },
  "983": { x: 112, y: 75 }, "984": { x: 135, y: 85 }, "985": { x: 105, y: 82 },
  "986": { x: 150, y: 92 }, "988": { x: 165, y: 88 }, "989": { x: 178, y: 85 },
  "990": { x: 185, y: 80 }, "991": { x: 190, y: 82 }, "992": { x: 205, y: 80 },
  "993": { x: 218, y: 88 }, "994": { x: 230, y: 95 },
  // Alaska/Hawaii (positioned in bottom)
  "995": { x: 145, y: 510 }, "996": { x: 130, y: 505 }, "997": { x: 115, y: 498 },
  "998": { x: 100, y: 515 }, "999": { x: 85, y: 508 },
  "967": { x: 280, y: 520 }, "968": { x: 260, y: 515 },
};

// Get approximate coordinates for a ZIP code
function getZipPosition(zip: string): { x: number; y: number } | null {
  if (zip.length < 3) return null;
  const prefix = zip.slice(0, 3);
  return ZIP_COORDS[prefix] || null;
}

// Generate curved path between two points
function generateArcPath(from: { x: number; y: number }, to: { x: number; y: number }): string {
  const midX = (from.x + to.x) / 2;
  const midY = (from.y + to.y) / 2;
  const dx = to.x - from.x;
  const dy = to.y - from.y;
  const dist = Math.sqrt(dx * dx + dy * dy);
  
  // Control point perpendicular to midpoint, offset based on distance
  const offset = Math.min(dist * 0.25, 60);
  const angle = Math.atan2(dy, dx) - Math.PI / 2;
  const cx = midX + Math.cos(angle) * offset;
  const cy = midY + Math.sin(angle) * offset;
  
  return `M ${from.x} ${from.y} Q ${cx} ${cy} ${to.x} ${to.y}`;
}

// US_PATH removed - now using image background

export default function MoveMap({ fromZip, toZip }: MoveMapProps) {
  const fromPos = useMemo(() => getZipPosition(fromZip), [fromZip]);
  const toPos = useMemo(() => getZipPosition(toZip), [toZip]);
  const arcPath = useMemo(() => {
    if (fromPos && toPos) {
      return generateArcPath(fromPos, toPos);
    }
    return null;
  }, [fromPos, toPos]);

  return (
    <div className="move-map-container">
      <svg 
        viewBox="0 0 960 540" 
        className="move-map-svg"
        preserveAspectRatio="xMidYMid meet"
      >
        {/* US map background image */}
        <image
          href={usMapImage}
          x="0"
          y="0"
          width="960"
          height="540"
          preserveAspectRatio="xMidYMid slice"
          className="move-map-bg-image"
        />
        
        {/* Arc path with background trail and traveling truck */}
        {arcPath && (
          <>
            {/* Background glow trail */}
            <path
              d={arcPath}
              className="move-map-arc-bg"
              fill="none"
            />
            {/* Animated dashed foreground */}
            <path
              d={arcPath}
              className="move-map-arc"
              fill="none"
            />
            {/* Traveling truck icon */}
            <g className="move-map-truck">
              <animateMotion
                dur="4s"
                repeatCount="indefinite"
                path={arcPath}
                rotate="auto"
              />
              {/* Truck SVG scaled and centered */}
              <g transform="translate(-10, -10) scale(0.85)">
                <rect x="1" y="3" width="15" height="13" rx="2" fill="hsl(var(--tm-ink))" />
                <path d="M16 8h4l3 4v5h-7V8z" fill="hsl(var(--tm-ink))" />
                <circle cx="5.5" cy="18.5" r="2.5" fill="hsl(var(--background))" stroke="hsl(var(--tm-ink))" strokeWidth="1.5" />
                <circle cx="18.5" cy="18.5" r="2.5" fill="hsl(var(--background))" stroke="hsl(var(--tm-ink))" strokeWidth="1.5" />
              </g>
            </g>
          </>
        )}
        
        {/* From marker */}
        {fromPos && (
          <g className="move-map-marker-group">
            <circle
              cx={fromPos.x}
              cy={fromPos.y}
              r="12"
              className="move-map-marker-pulse move-map-marker-from-pulse"
            />
            <circle
              cx={fromPos.x}
              cy={fromPos.y}
              r="7"
              className="move-map-marker-dot move-map-marker-from-dot"
            />
          </g>
        )}
        
        {/* To marker */}
        {toPos && (
          <g className="move-map-marker-group">
            <circle
              cx={toPos.x}
              cy={toPos.y}
              r="12"
              className="move-map-marker-pulse move-map-marker-to-pulse"
            />
            <circle
              cx={toPos.x}
              cy={toPos.y}
              r="7"
              className="move-map-marker-dot move-map-marker-to-dot"
            />
          </g>
        )}
      </svg>
      
      {/* Placeholder when no locations */}
      {!fromPos && !toPos && (
        <div className="move-map-placeholder">
          <span>Enter ZIPs to see route</span>
        </div>
      )}
    </div>
  );
}
